<link rel="import" href="../bower_components/polymer/polymer-element.html">
<link rel="import" href="../bower_components/mp-slider/mp-slider.html">


<script src="../bower_components/webcomponentsjs/webcomponents-lite.js"></script>

<dom-module id="component-edit">
  <template>
    <style>
      .imageStyle{
        width:50px;

      }
    </style>

    <iron-ajax
      id="getImageContact"
      url="../image.json"
      handle-as="json"
      content-type="application/json"
      on-response="responseGenerate"
      >
    </iron-ajax>

  </template>

  <script>
    class ComponentEdit extends Polymer.Element {
      static get is() { return 'component-edit'; }
      static get properties() {
        return {
          data: {
            type: Object,
            value: {
             "id": "","name":"", "urlImage":""
            }
          }
        };
      }
      constructor(){
        super();
        const shadowRoot = this.attachShadow({mode: 'open'});

      }
      ready() {
        super.ready();
        this.$.getImageContact.generateRequest();
      }

      responseGenerate(request){
        let mpSlider = '';
        var div = document.createElement('div');
        div.id = "container";
        div.style.width = "70%";
        this.set('data', this.$.getImageContact.lastResponse[0]);
        this.data  = JSON.parse(JSON.stringify(request.detail.response)) ;
        for(let i = 0; i < this.data.length; i++){
            mpSlider += `
              <div><img class="imageStyle" src="${this.data[i].urlImage}"/>
                <mp-caption style="text-align:center" slider-header="${this.data[i].name}">
                </mp-caption>
              </div>`
        }
        div.innerHTML= `
           <mp-slider controls bullets show-thumbs>${mpSlider}</mp-slider>
          `;
        this.shadowRoot.appendChild(div);
      }
    }

    window.customElements.define(ComponentEdit.is, ComponentEdit);
  </script>

</dom-module>
